<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/base}"
>
  <head>
    <title>Masuk - Activity Tracker</title>
    
    <!-- Import Font Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- WAJIB: Import Bootstrap Icons agar ikon muncul -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
      /* Style khusus halaman login */
      body {
          font-family: 'Poppins', sans-serif;
      }

      /* Wrapper utama - Background Ungu */
      .login-wrapper {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 20px;
          /* Trik untuk menutupi margin/padding bawaan dari layout base */
          position: fixed; 
          top: 0; 
          left: 0; 
          right: 0; 
          bottom: 0;
          z-index: 9999;
          overflow-y: auto;
      }

      /* Kartu Login */
      .card-custom {
          background: #ffffff;
          border-radius: 20px;
          box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
          width: 100%;
          max-width: 400px;
          padding: 2.5rem;
          margin: auto;
      }

      /* Logo & Header */
      .login-header h5 {
          font-weight: 700;
          color: #4a4a4a;
          margin-top: 5px;
          margin-bottom: 5px;
      }

      /* Input Form */
      .form-control {
          background-color: #f8f9fa;
          border: 2px solid #eee;
          border-radius: 12px;
          padding: 12px 15px;
      }

      .form-control:focus {
          background-color: #fff;
          border-color: #764ba2;
          box-shadow: 0 0 0 4px rgba(118, 75, 162, 0.1);
      }

      /* Tombol Gradient */
      .btn-gradient {
          background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
          border: none;
          border-radius: 50px;
          padding: 12px;
          font-weight: 600;
          width: 100%;
          color: white;
          margin-top: 10px;
          transition: all 0.3s;
      }

      .btn-gradient:hover {
          transform: translateY(-2px);
          box-shadow: 0 5px 15px rgba(118, 75, 162, 0.3);
          color: white;
      }

      .footer-link a {
          color: #764ba2;
          text-decoration: none;
          font-weight: 600;
      }
    </style>
  </head>
  <body>
    <!-- Fragment Content -->
    <div layout:fragment="content">
      
      <div class="login-wrapper">
        
        <div class="card-custom" th:object="${loginForm}">
          
            <!-- Header -->
            <div class="text-center login-header mb-4">
              
              <!-- === BAGIAN INI SUDAH DIGANTI JADI IKON === -->
              <div class="mb-3">
                  <!-- Ikon Activity dengan Gradasi Warna -->
                  <i class="bi bi-activity" 
                     style="font-size: 4.5rem; 
                            background: -webkit-linear-gradient(45deg, #667eea, #764ba2); 
                            -webkit-background-clip: text; 
                            -webkit-text-fill-color: transparent;">
                  </i>
              </div>
              <!-- ========================================== -->

              <h5>Selamat Datang</h5>
              <p class="text-muted small">
                Silakan masuk untuk melanjutkan
              </p>
            </div>

            <!-- Pesan Error Global -->
            <div th:if="${#fields.hasGlobalErrors()}" class="alert alert-danger rounded-3 fs-6 p-2 mb-3">
              <th:block th:each="err : ${#fields.globalErrors()}" th:text="${err}"></th:block>
            </div>

            <!-- Form Start -->
            <form th:action="@{/auth/login/post}" method="post">
              
              <!-- Input Email -->
              <div class="mb-3 text-start">
                <label for="inputEmail" class="form-label fw-bold text-secondary small ps-1">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="inputEmail"
                  th:field="*{email}"
                  th:classappend="${#fields.hasErrors('email')} ? 'is-invalid'"
                  placeholder="nama@email.com"
                />
                <div th:if="${#fields.hasErrors('email')}" class="invalid-feedback ps-1">
                  <th:block th:each="err : ${#fields.errors('email')}" th:text="${err}"></th:block>
                </div>
              </div>

              <!-- Input Password -->
              <div class="mb-3 text-start">
                <label for="inputPassword" class="form-label fw-bold text-secondary small ps-1">Kata Sandi</label>
                <input
                  type="password"
                  class="form-control"
                  id="inputPassword"
                  th:field="*{password}"
                  th:classappend="${#fields.hasErrors('password')} ? 'is-invalid'"
                  placeholder="••••••••"
                />
                <div th:if="${#fields.hasErrors('password')}" class="invalid-feedback ps-1">
                  <th:block th:each="err : ${#fields.errors('password')}" th:text="${err}"></th:block>
                </div>
              </div>

              <!-- Remember Me -->
              <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="form-check">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    id="optionRememberMe"
                    th:field="*{rememberMe}"
                  />
                  <label class="form-check-label text-secondary small" for="optionRememberMe">
                    Ingat saya
                  </label>
                </div>
                <a href="#" class="small text-decoration-none text-muted">Lupa sandi?</a>
              </div>

              <!-- Tombol -->
              <div class="d-grid">
                <button type="submit" class="btn btn-gradient">
                  Masuk
                </button>
              </div>

            </form>
            <!-- Form End -->

            <!-- Footer -->
            <div class="text-center mt-4 footer-link small">
              <p class="text-muted">
                Belum punya akun?
                <a th:href="@{/auth/register}">Daftar Sekarang</a>
              </p>
            </div>
            
        </div>
      </div>
    </div>
  </body>
</html>